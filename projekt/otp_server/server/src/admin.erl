-module(admin).

%% To use EUnit we must include this:
-include_lib("eunit/include/eunit.hrl").

-export([details/1]).
-export([list_rooms/1, print/2, test/0]).


%% ------------------------------------------------------------------
%% Displays information regarding the server
%% ------------------------------------------------------------------
details(Sock) ->
    list_rooms(Sock).

%% ------------------------------------------------------------------
%% ------------------------------------------------------------------
%% ------------------------------------------------------------------
%% INTERNAL FUNCIONS
%% ------------------------------------------------------------------
%% ------------------------------------------------------------------
%% ------------------------------------------------------------------

print(X,Ln)->
    io:format(">>~s -------------\n",[X]),
    io:format("~w members\n",[length(Ln)]),
    io:format("~p \n\n",[Ln]).
    
%% ------------------------------------------------------------------
%% Displays current room-list
%% ------------------------------------------------------------------
list_rooms(Sock) ->
    lists:foreach(fun({X,Ln})->print(X,Ln) end, Sock).





%%TESTFALL
test() ->
    A = [{"Global",['#Port<0.683>','#Port<0.676>']},{"ny_rum",['#Port<0.676>']}, {"test_rum",['#Port<0.683>','#Port<0.676>']},{"hampusRum",['#Port<0.676>']},{"HELL",['#Port<0.683>','#Port<0.676>','#Port<0.676>','#Port<0.626>']},{"nya",[]},{"tjena_rummet",['#Port<0.683>','#Port<0.676>']}],
    
    details(A).
